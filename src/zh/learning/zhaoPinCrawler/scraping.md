---
title: æ•°æ®é‡‡é›†
icon: magnifying-glass
order: 2
category:
  - Python
  - DrissionPage
tag:
  - Boss ç›´è˜
  - æ™ºè”æ‹›è˜
  - å‰ç¨‹æ— å¿§
---

æœ¬æ•™ç¨‹å°†æŒ‡å¯¼ä½ å¦‚ä½•çˆ¬å– æ‹›è˜ç½‘ç«™ ä¸­çš„æ±‚èŒä¿¡æ¯ ã€‚

<!-- more -->

## 1. Bossç›´è˜

### âœ…ï¸URLè·å–

æ‰“å¼€å®˜ç½‘[Bossç›´è˜](https://www.zhipin.com/)

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/290d8576eae6b8a8de26d74cc047e575.png?raw=true)

æˆ‘ä»¬éšä¾¿æœç´¢ä¸€ä¸ªæ±‚èŒä¿¡æ¯å¦‚ `python`

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/f4989b7e2cf29a8082b68acc7f3f1704.png?raw=true)

ç½‘å€ä¸­ å¯ä»¥å‘ç°æœ‰ä¸¤ä¸ªå‚æ•° `qurey=python` å’Œ`city=100010000`

æˆ‘ä»¬å†æœç´¢ä¸€ä¸ªæ±‚èŒä¿¡æ¯å¦‚ `java`

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/ecc18777431654b1c244922dd813bd0c.png?raw=true)

å‘ç°å‚æ•°`qurey=java`å’Œ`city=100010000`

é€šè¿‡å¯¹æ¯”ä¸¤ä¸ªç½‘å€
`qurey`ä»£è¡¨æ±‚èŒä¿¡æ¯å³æˆ‘ä»¬æœç´¢æ¡†ä¸­è¾“å…¥çš„å†…å®¹
`city`å¯ä»¥çŸ¥é“æ˜¯èŒä¸šçš„åœ°åŒºå‚æ•°ï¼Œ `100010000`å¯¹åº”çš„æ˜¯å…¨å›½å‚æ•°

ç°åœ¨çš„é—®é¢˜å°±æ˜¯æ¯ä¸ªåŸå¸‚å¯¹åº”çš„å‚æ•°æ˜¯ä»€ä¹ˆ

è¿”å›åˆ°ä¸»é¡µï¼ŒæŒ‰`F12`æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œé€‰æ‹©ç½‘ç»œä¸€æ 

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/72e604671ab18b8f344949410f6cc101.png?raw=true)

åˆ·æ–°ä¸€ä¸‹ç½‘é¡µï¼ˆè‹¥ç½‘ç»œä¸€æ æ— æ–‡ä»¶ï¼Œåˆ™éœ€è¦åˆ·æ–°ç½‘é¡µï¼‰ï¼Œæœç´¢æ¡†ä¸­æœç´¢city

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/a5e3ffc7e5c3f22f109a6edf89662320.png?raw=true)

æ‰¾åˆ°`city.json`ï¼ˆå°±æ˜¯åŸå¸‚çš„å‚æ•°æ–‡ä»¶ï¼‰

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/a595cc3b9b6085fcc67c7f2625632fde.png?raw=true)

è®¿é—®ç½‘å€ !! [city.json](https://www.zhipin.com/wapi/zpCommon/data/city.json) !!

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/85d92e8d1c67280e59bfb670d72ba197.png?raw=true)

æ¯ä¸ªåŸå¸‚å¯¹åº”çš„å‚æ•°éƒ½åœ¨è¯¥ç½‘å€

### âœ…ï¸æ‹›è˜ä¿¡æ¯è·å–

åˆšåˆšæˆ‘ä»¬è·å–å®Œurlçš„ä¸¤ä¸ªå‚æ•°ä¿¡æ¯

ä»¥`qurey=python city=100010000` ä¸¾ä¾‹
æ‰€ä»¥å¯¹åº”çš„url = `https://www.zhipin.com/web/geek/job?query=python&city=100010000`

æˆ‘ä»¬è®¿é—®ç½‘å€ï¼Œæ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œé€‰æ‹©ç½‘ç»œä¸€æ 

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/9bc3f28b889eb854d221a57920a26656.png?raw=true)

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/c3b61d0c6d04f6dfd5d65526d57ba6fa.png?raw=true)

é€‰æ‹© æ ‡å¤´ ä¸€æ  ï¼Œæ‰¾åˆ°è¯·æ±‚æ ‡å¤´çš„:pathä¸€æ 
å¤åˆ¶`search/joblist.json` åé¢ç¼–å†™ä»£ç éœ€è¦

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/ae63c3e24c8e44b743a7fdb612a53a9b.png?raw=true)

ä»¥ä¸Šï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ç¼–å†™ä»£ç çš„å‡†å¤‡ç¯èŠ‚

### âœ…ï¸ä»£ç ç¼–å†™

ç”¨åˆ°çš„åŒ…`DrissionPage`

[ä½¿ç”¨æ–‡æ¡£](https://www.drissionpage.cn/get_start/installation)

#### ğŸ“Œï¸URLè·å–æ¨¡å—

``` python
    def _get_city_code(self):
        """è·å–åŸå¸‚ç¼–ç """
        #ç”Ÿæˆé¡µé¢å¯¹è±¡
        page = SessionPage()
        #è®¿é—®åœ¨çº¿ç½‘é¡µ
        page.get('https://www.zhipin.com/wapi/zpCommon/data/city.json')#åˆšåˆšè·å–åˆ°çš„city.jsonç½‘å€
        json_data = page.json['zpData']['cityList']
        for dit in json_data:
            for city_json in dit['subLevelModelList']:
                if city_json['name'] == self.city:
                    return str(city_json['code'])
        return '100010000'  # é»˜è®¤å€¼ä¸ºå…¨å›½
    def _get_url(self):
        """æ ¹æ®å…³é”®è¯å’ŒåŸå¸‚ç¼–ç ç”Ÿæˆæ­£ç¡®çš„URL"""
        #æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ›¿æ¢
        self.url = re.sub(r'(?<=query=)[^&]+', self.keyword, self.url)
        self.url = re.sub(r'(?<=city=)[^&]+', self._get_city_code(), self.url)
        print(self.url)
        return self.url
```

::: tip æç¤º

page.jsonè¿”å›çš„æ˜¯ä¸€ä¸ªå­—å…¸ç±»å‹

`'zpData'`è®¿é—®çš„æ˜¯

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/ac5ce6edf4714822162ebb87ec0dea87.png?raw=true)

`'cityList'`è®¿é—®çš„æ˜¯

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/53eb5e43620d7c652bb5b6dbaf0791f7.png?raw=true)

è¿™é‡Œçš„`dit['subLevelModelList']`ä»£è¡¨

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/df9900812e43c4911e8b47322b3b981c.png?raw=true)

:::

#### ğŸ“Œæ•°æ®æŠ“å–

```python
def run(self):
    """çˆ¬å–æ•°æ®å¹¶å†™å…¥CSV"""
    page = None
    try:
        #ChromiumPageåŒºåˆ«äºSessionPageï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯äº¤äº’æ€§çš„ç½‘é¡µ
        page = ChromiumPage()
        
        page.listen.start('search/joblist.json')#æ­¤å¤„æ˜¯æˆ‘ä»¬è¦åœ¨ç½‘ç»œä¸­è·å–çš„æ•°æ®æ–‡ä»¶
        page.get(self._get_url())
        for page_num in range(1000):  # ç¿»é¡µå¤„ç†
            page.scroll.to_bottom()  # æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ï¼ŒåŠ è½½æ–°å†…å®¹
            response = page.listen.wait()  # ç­‰å¾…ç›‘å¬åˆ°çš„è¯·æ±‚å“åº”
            json_data = response.response.body
            jobList = json_data['zpData']['jobList']
            for job in jobList:
                data = {
                    'èŒä½': job['jobName'],
                    'åŸå¸‚': job['cityName'],
                    'å…¬å¸': job['brandName'],
                    'è–ªèµ„': job['salaryDesc'],
                    'ç»éªŒ': job['jobExperience'],
                    'å­¦å†': job['jobDegree'],
                    'é¢†åŸŸ': job['brandIndustry'],
                    'æŠ€èƒ½': ', '.join(job['skills']),
                    'ç¦åˆ©': ', '.join(job['welfareList']),
                }
                self.csv_writer.writerow(data)

            # ç¿»é¡µæ“ä½œ
            next_page_btn = page.ele('css:.options-pages a:last-of-type')
            if 'disable' in next_page_btn.attr('class'):
                break
            else:
                next_page_btn.click()  # ç‚¹å‡»ä¸‹ä¸€é¡µæŒ‰é’®
    except Exception as e:
        print(f"å‘ç”Ÿé”™è¯¯: {e}")
    finally:
        if page:
            page.quit()  # å…³é—­æµè§ˆå™¨å®ä¾‹
```
::: tip æç¤º

å…³äºç¿»é¡µæ“ä½œçš„å‚æ•°

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/9a05629233294e66befa6f691b607289.png?raw=true)

å¯ä»¥çœ‹åˆ°ä¸‹ä¸€é¡µçš„æŒ‰é’®æ ‡ç­¾åç§°ä¸º `ui-icon-arrow-right`

ä½†æ˜¯åŒä¸Šæ“ä½œåœ¨æœ€åä¸€é¡µä¸‹ä¸€é¡µçš„æŒ‰é’®ä¸º `disabled`

ä¸ºæ­¤åšä¸€ä¸ªåŒºåˆ†ï¼Œä¸‹ä¸€é¡µçš„æ ‡ç­¾åœ¨ `class = "options-pages"` çš„æœ€åä¸€ä¸ªï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨`'css:.options-pages a:last-of-type'`æ¥è·å–æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ¥åˆ¤æ–­æ˜¯å¦è¿›è¡Œä¸‹ä¸€é¡µ

:::

### âœ…ï¸æºä»£ç å¦‚ä¸‹

```python
from DrissionPage import SessionPage, ChromiumPage
import re
import csv

class Boss(object):
    def __init__(self, keyword, city):
        self.keyword = keyword
        self.city = city
        self.url = 'https://www.zhipin.com/web/geek/job?query=python&city=101200100'

        # æ›¿æ¢æ‰æ–‡ä»¶åä¸­çš„éæ³•å­—ç¬¦
        safe_keyword = self.keyword.replace('/', '_').replace('\\', '_').replace(':', '_')
        safe_city = self.city.replace('/', '_').replace('\\', '_').replace(':', '_')

        # ç”Ÿæˆæ–‡ä»¶å
        file_name = f'Bossç›´è˜_å…³é”®è¯_{safe_keyword}_åŸå¸‚_{safe_city}.csv'

        try:
            self.f = open(file_name, mode='w', encoding='utf-8', newline='')
            self.csv_writer = csv.DictWriter(self.f, fieldnames=[
                'èŒä½',
                'åŸå¸‚',
                'å…¬å¸',
                'è–ªèµ„',
                'ç»éªŒ',
                'å­¦å†',
                'é¢†åŸŸ',
                'æŠ€èƒ½',
                'ç¦åˆ©',
            ])
            self.csv_writer.writeheader()
        except Exception as e:
            print(f"æ‰“å¼€æ–‡ä»¶æ—¶å‘ç”Ÿé”™è¯¯: {e}")
            self.f = None  # ç¡®ä¿å¦‚æœæ–‡ä»¶æ‰“å¼€å¤±è´¥ï¼Œself.f ä¸ä¼šè¢«å¼•ç”¨

    def __del__(self):
        """ç¡®ä¿åœ¨å¯¹è±¡é”€æ¯æ—¶å…³é—­CSVæ–‡ä»¶"""
        if hasattr(self, 'f') and self.f:  # æ£€æŸ¥æ˜¯å¦å­˜åœ¨ f å±æ€§
            self.f.close()

    def _get_city_code(self):
        """è·å–åŸå¸‚ç¼–ç """
        page = SessionPage()
        page.get('https://www.zhipin.com/wapi/zpCommon/data/city.json')
        json_data = page.json['zpData']['cityList']
        for dit in json_data:
            for city_json in dit['subLevelModelList']:
                if city_json['name'] == self.city:
                    return str(city_json['code'])
        return '100010000'  # é»˜è®¤å€¼ä¸ºå…¨å›½

    def _get_url(self):
        """æ ¹æ®å…³é”®è¯å’ŒåŸå¸‚ç¼–ç ç”Ÿæˆæ­£ç¡®çš„URL"""
        self.url = re.sub(r'(?<=query=)[^&]+', self.keyword, self.url)
        self.url = re.sub(r'(?<=city=)[^&]+', self._get_city_code(), self.url)
        print(self.url)
        return self.url

    def run(self):
        """çˆ¬å–æ•°æ®å¹¶å†™å…¥CSV"""
        page = None
        try:
            page = ChromiumPage()
            page.listen.start('search/joblist.json')
            page.get(self._get_url())
            for page_num in range(1000):  # ç¿»é¡µå¤„ç†
                page.scroll.to_bottom()  # æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ï¼ŒåŠ è½½æ–°å†…å®¹
                response = page.listen.wait()  # ç­‰å¾…ç›‘å¬åˆ°çš„è¯·æ±‚å“åº”
                json_data = response.response.body
                jobList = json_data['zpData']['jobList']
                for job in jobList:
                    data = {
                        'èŒä½': job['jobName'],
                        'åŸå¸‚': job['cityName'],
                        'å…¬å¸': job['brandName'],
                        'è–ªèµ„': job['salaryDesc'],
                        'ç»éªŒ': job['jobExperience'],
                        'å­¦å†': job['jobDegree'],
                        'é¢†åŸŸ': job['brandIndustry'],
                        'æŠ€èƒ½': ', '.join(job['skills']),
                        'ç¦åˆ©': ', '.join(job['welfareList']),
                    }
                    self.csv_writer.writerow(data)

                # ç¿»é¡µæ“ä½œ
                next_page_btn = page.ele('css:.options-pages a:last-of-type')
                if 'disable' in next_page_btn.attr('class'):
                    break
                else:
                    next_page_btn.click()  # ç‚¹å‡»ä¸‹ä¸€é¡µæŒ‰é’®
        except Exception as e:
            print(f"å‘ç”Ÿé”™è¯¯: {e}")
        finally:
            if page:
                page.quit()  # å…³é—­æµè§ˆå™¨å®ä¾‹


if __name__ == '__main__':
    city = input('è¯·è¾“å…¥åŸå¸‚åï¼š')
    keyword = input('è¯·è¾“å…¥æœç´¢å…³é”®è¯ï¼š')

    # ç¡®ä¿ç”¨æˆ·è¾“å…¥ä¸ä¸ºç©º
    if keyword:
        boss_spider = Boss(keyword=keyword, city=city)
        boss_spider.run()
    else:
        print("å…³é”®è¯å’ŒåŸå¸‚åä¸èƒ½ä¸ºç©ºï¼")


```

## 2. æ™ºè”æ‹›è˜

### âœ…ï¸URLè·å–

æ‰“å¼€å®˜ç½‘[æ™ºè”æ‹›è˜](https://www.zhaopin.com/)

åŒç†

åŸºç¡€URL
`https://www.zhaopin.com/sou/?jl=489&kw=python&p=2`

å‚æ•°æœ‰3ä¸ªï¼Œjl=åŸå¸‚ï¼Œkw=æ‹›è˜å²—ä½ï¼Œp=é¡µé¢

[åŸå¸‚å‚æ•°ç½‘å€](https://fe-api.zhaopin.com/c/i/search/base/data)

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/bb3a16e648641dc832cb27e0d7e08226.png?raw=true)

æ¯ä¸ªåŸå¸‚å¯¹åº”çš„å‚æ•°éƒ½åœ¨è¯¥ç½‘å€

### âœ…ï¸æ‹›è˜ä¿¡æ¯è·å–

æœ‰åˆ«äºBossç›´è˜

ä½ åœ¨æœç´¢å…¬å¸åç§°æ—¶ï¼Œå‘ç°æ‰¾ä¸åˆ°å¯¹åº”çš„jsonæ–‡ä»¶

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/8a13a58b29ec704471aadf5f29704036.png?raw=true)

ä½†æˆ‘ä»¬ç¿»åˆ°ç¬¬äºŒé¡µçš„æ—¶å€™

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/bf0c4b32071287ce71d73be96ab25291.png?raw=true)

å¯¹åº”çš„æ–‡ä»¶æ‰¾åˆ°äº†

è·å–åˆ°:path: !!`search/positions`!!

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/8ba9ad699c8d6c64d12a1f0d7a886162.png?raw=true)

### âœ…ï¸ä»£ç ç¼–å†™

ç”¨åˆ°çš„åŒ…`DrissionPage`

[ä½¿ç”¨æ–‡æ¡£](https://www.drissionpage.cn/get_start/installation)

#### ğŸ“ŒURLè·å–æ¨¡å—

``` python
        def _get_city_code(self):
        """è·å–åŸå¸‚ç¼–ç """
        page = SessionPage()
        page.get('https://fe-api.zhaopin.com/c/i/search/base/data')
        json_data = page.json['data']['allCity']
        for dit in json_data:
            if dit['name'] == self.city:
                return str(dit['code'])
            for city_json in dit['sublist']:
                if city_json['name'] == self.city:
                    return str(city_json['code'])
        return '489'  # é»˜è®¤å€¼ä¸ºå…¨å›½

    def _get_url(self):
        """æ ¹æ®å…³é”®è¯å’ŒåŸå¸‚ç¼–ç ç”Ÿæˆæ­£ç¡®çš„URL"""
        self.url = re.sub(r'(?<=jl=)[^&]+', self._get_city_code(), self.url)
        self.url = re.sub(r'(?<=kw=)[^&]+', self.keyword, self.url)
        print(self.url)
        return self.url
```

#### ğŸ“Œæ•°æ®æŠ“å–

```python
    def run(self):
        """çˆ¬å–æ•°æ®å¹¶å†™å…¥CSV"""
        page = None
        try:
            page = ChromiumPage()
            page.listen.start('/search/positions')
            page.get(self._get_url())
            page.scroll.to_bottom()  # æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ï¼ŒåŠ è½½æ–°å†…å®¹
            page.ele('css:.soupager__btn').click()
            for page_num in range(1000):  # ç¿»é¡µå¤„ç†
                page.scroll.to_bottom()  # æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ï¼ŒåŠ è½½æ–°å†…å®¹
                response = page.listen.wait()  # ç­‰å¾…ç›‘å¬åˆ°çš„è¯·æ±‚å“åº”
                json_data = response.response.body
                jobList = json_data['data']['list']
                for job in jobList:
                    data = {
                        'èŒä½': job['name'],
                        'åŸå¸‚': job['workCity'],
                        'å…¬å¸': job['companyName'],
                        'è–ªèµ„': job['salary60'],
                        'ç»éªŒ': job['workingExp'],
                        'å­¦å†': job['education'],
                        'é¢†åŸŸ': job['industryName'],
                        'æŠ€èƒ½': ', '.join(skill['name'] for skill in job['jobSkillTags']),
                        'ç¦åˆ©': ', '.join(job['jobKnowledgeWelfareFeatures']),
                    }
                    self.csv_writer.writerow(data)
                # ç¿»é¡µæ“ä½œ
                next_page_btn = page.ele('css:.soupager a:last-of-type')
                if 'soupager__btn--disable' in next_page_btn.attr('class'):
                    break
                else:
                    next_page_btn.click()  # ç‚¹å‡»ä¸‹ä¸€é¡µæŒ‰é’®
        except Exception as e:
            print(f"å‘ç”Ÿé”™è¯¯: {e}")
        finally:
            if page:
                page.quit()  # å…³é—­æµè§ˆå™¨å®ä¾‹
```
::: tip æç¤º

å…³äºç¿»é¡µæ“ä½œçš„å‚æ•°

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/b2bd99163d8d5d91f9d80dbe5e761275.png?raw=true

å¯ä»¥çœ‹åˆ°ä¸Šä¸€é¡µå’Œä¸‹ä¸€é¡µçš„æŒ‰é’®æ ‡ç­¾åç§°éƒ½ä¸º `btn soupager__btn`

ä¸ºæ­¤åšä¸€ä¸ªåŒºåˆ†ï¼Œä¸‹ä¸€é¡µçš„æ ‡ç­¾åœ¨ `class = "soupager"` çš„æœ€åä¸€ä¸ªï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨`'css:.soupager a:last-of-type'`æ¥è·å–æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ¥åˆ¤æ–­æ˜¯å¦è¿›è¡Œä¸‹ä¸€é¡µ

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/5df59188e05be2e74d109598d06610ce.png?raw=true)

æœ€åä¸€é¡µçš„ä¸‹ä¸€é¡µçš„æ ‡ç­¾ä¸º `'soupager__btn--disable'`

:::

### âœ…ï¸æºä»£ç å¦‚ä¸‹

```python
import time
from DrissionPage import SessionPage, ChromiumPage
import re
import csv
class Zhilian(object):
    def __init__(self, keyword, city):
        self.keyword = keyword
        self.city = city
        self.url = 'https://www.zhaopin.com/sou/?jl=489&kw=python&p=2'

        # æ›¿æ¢æ‰æ–‡ä»¶åä¸­çš„éæ³•å­—ç¬¦
        safe_keyword = self.keyword.replace('/', '_').replace('\\', '_').replace(':', '_')
        safe_city = self.city.replace('/', '_').replace('\\', '_').replace(':', '_')

        # ç”Ÿæˆæ–‡ä»¶å
        file_name = f'æ™ºè”æ‹›è˜_å…³é”®è¯_{safe_keyword}_åŸå¸‚_{safe_city}.csv'
        try:
            self.f = open(file_name, mode='w', encoding='utf-8', newline='')
            self.csv_writer = csv.DictWriter(self.f, fieldnames=[
                'èŒä½',
                'åŸå¸‚',
                'å…¬å¸',
                'è–ªèµ„',
                'ç»éªŒ',
                'å­¦å†',
                'é¢†åŸŸ',
                'æŠ€èƒ½',
                'ç¦åˆ©',
            ])
            self.csv_writer.writeheader()
        except Exception as e:
            print(f"æ‰“å¼€æ–‡ä»¶æ—¶å‘ç”Ÿé”™è¯¯: {e}")
            self.f = None  # ç¡®ä¿å¦‚æœæ–‡ä»¶æ‰“å¼€å¤±è´¥ï¼Œself.f ä¸ä¼šè¢«å¼•ç”¨

    def __del__(self):
        """ç¡®ä¿åœ¨å¯¹è±¡é”€æ¯æ—¶å…³é—­CSVæ–‡ä»¶"""
        if hasattr(self, 'f') and self.f:  # æ£€æŸ¥æ˜¯å¦å­˜åœ¨ f å±æ€§
            self.f.close()

    def _get_city_code(self):
        """è·å–åŸå¸‚ç¼–ç """
        page = SessionPage()
        page.get('https://fe-api.zhaopin.com/c/i/search/base/data')
        json_data = page.json['data']['allCity']
        for dit in json_data:
            if dit['name'] == self.city:
                return str(dit['code'])
            for city_json in dit['sublist']:
                if city_json['name'] == self.city:
                    return str(city_json['code'])
        return '489'  # é»˜è®¤å€¼ä¸ºå…¨å›½

    def _get_url(self):
        """æ ¹æ®å…³é”®è¯å’ŒåŸå¸‚ç¼–ç ç”Ÿæˆæ­£ç¡®çš„URL"""
        self.url = re.sub(r'(?<=jl=)[^&]+', self._get_city_code(), self.url)
        self.url = re.sub(r'(?<=kw=)[^&]+', self.keyword, self.url)
        print(self.url)
        return self.url

    def run(self):
        """çˆ¬å–æ•°æ®å¹¶å†™å…¥CSV"""
        page = None
        try:
            page = ChromiumPage()
            page.listen.start('/search/positions')
            page.get(self._get_url())
            time.sleep(2)
            page.scroll.to_bottom()  # æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ï¼ŒåŠ è½½æ–°å†…å®¹
            page.ele('css:.soupager__btn').click()
            for page_num in range(1000):  # ç¿»é¡µå¤„ç†
                page.scroll.to_bottom()  # æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ï¼ŒåŠ è½½æ–°å†…å®¹
                response = page.listen.wait()  # ç­‰å¾…ç›‘å¬åˆ°çš„è¯·æ±‚å“åº”
                json_data = response.response.body
                jobList = json_data['data']['list']
                for job in jobList:
                    data = {
                        'èŒä½': job['name'],
                        'åŸå¸‚': job['workCity'],
                        'å…¬å¸': job['companyName'],
                        'è–ªèµ„': job['salary60'],
                        'ç»éªŒ': job['workingExp'],
                        'å­¦å†': job['education'],
                        'é¢†åŸŸ': job['industryName'],
                        'æŠ€èƒ½': ', '.join(skill['name'] for skill in job['jobSkillTags']),
                        'ç¦åˆ©': ', '.join(job['jobKnowledgeWelfareFeatures']),
                    }
                    self.csv_writer.writerow(data)
                # ç¿»é¡µæ“ä½œ
                next_page_btn = page.ele('css:.soupager a:last-of-type')
                if 'soupager__btn--disable' in next_page_btn.attr('class'):
                    break
                else:
                    next_page_btn.click()  # ç‚¹å‡»ä¸‹ä¸€é¡µæŒ‰é’®
        except Exception as e:
            print(f"å‘ç”Ÿé”™è¯¯: {e}")
        finally:
            if page:
                page.quit()  # å…³é—­æµè§ˆå™¨å®ä¾‹


if __name__ == '__main__':
    city = input('è¯·è¾“å…¥åŸå¸‚åï¼š')
    keyword = input('è¯·è¾“å…¥æœç´¢å…³é”®è¯ï¼š')

    # ç¡®ä¿ç”¨æˆ·è¾“å…¥ä¸ä¸ºç©º
    if keyword:
        Zhilian_spider = Zhilian(keyword=keyword, city=city)
        Zhilian_spider.run()
    else:
        print("å…³é”®è¯å’ŒåŸå¸‚åä¸èƒ½ä¸ºç©ºï¼")


```
## 3. å‰ç¨‹æ— å¿§

æ‰“å¼€å®˜ç½‘[å‰ç¨‹æ— å¿§](https://www.51job.com/)

::: info å‰æƒ…æè¦

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/aa01ca6c23e2924c53795a1a4f420b08.png?raw=true)

ç”±äºè¯¥ç½‘ç«™æ‹›è˜ä¿¡æ¯ æŠ€èƒ½è¦æ±‚å’Œç¦åˆ© ç­‰ä¿¡æ¯åœ¨ä¸€å—ï¼ŒåæœŸæ•°æ®å¤„ç†å¾ˆéº»çƒ¦ï¼Œæ•…åœ¨è¿™é‡Œåªæ•™ç¨‹å¦‚ä½•çˆ¬å–å†…å®¹

:::

### âœ…ï¸URLè·å–

`https://we.51job.com/pc/search?jobArea=020000&keyword=java&searchType=2&keywordType=`

å››ä¸ªå‚æ•°

jobArea åŸå¸‚å‚æ•°
keyword èŒä¸šå…³é”®å­—
searchType 1 æœå…¬å¸ 2 æœå…¨æ–‡
keywordType ä½œç”¨ä¸å¤§

åŸå¸‚å‚æ•° `https://js.51jobcdn.com/in/js/2023/dd/dd_city.json`

ç›‘å¬å‚æ•° `job/search-pc`

::: important ä½†æ˜¯

[ä¾‹å­](https://we.51job.com/api/job/search-pc?api_key=51job&timestamp=1729683309&keyword=java%5C&searchType=2&function=&industry=&jobArea=020000&jobArea2=&landmark=&metro=&salary=&workYear=&degree=&companyType=&companySize=&jobType=&issueDate=&sortType=0&pageNum=1&requestId=&keywordType=&pageSize=20&source=1&accountId=&pageCode=sou%7Csou%7Csoulb)

éœ€è¦æ‰‹åŠ¨éªŒè¯

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/6180b7c95b61929859a406b9ef1d9a34.png?raw=true)

æ‰€ä»¥è¯¥ç½‘ç«™ä¸èƒ½åƒå‰é¢ä¿©ä¸€æ ·çˆ¬å–ï¼ˆå¤§å®¶å¯ä»¥å°è¯•ç¼–å†™ä»£ç ï¼Œçªç ´éªŒè¯ï¼‰

é€šè¿‡ç›´æ¥çˆ¬å–ç½‘é¡µå…ƒç´ ï¼ˆè¯¥æ–¹æ³•ç›¸è¾ƒäºå‰é¢ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼‰

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/17f14af6511d3f7f4d887e9fc5fa5b74.png?raw=true)

:::

### âœ…ï¸ç®€å•demoç¼–å†™

æ ¹æ®é¡µé¢å…ƒç´ å¯ä»¥å¾—åˆ°ï¼Œé¡µé¢ä¸­ä¸€ä¸ªå·¥ä½œçš„ä¿¡æ¯åŒ…å«åœ¨ `class=joblist_item`ä¸­
æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡`ChromiumPage()`å¯¹è±¡çš„`eles`æ–¹æ³•è·å–é¡µé¢ä¸­æ‰€æœ‰`joblist_item`

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/5d0d58e356175b2b2bf60eb6bfe554f6.png?raw=true)

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/cfbab55c7407e4e7ce16da9c113b43ef.png?raw=true)

å…¬å¸ä¿¡æ¯å¦‚å›¾æ‰€ç¤º

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/83571e80863ffc6cd47feb632990d302.png?raw=true)

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/025a13cd4899c9ec3ef6a8b7110e6424.png?raw=true)

å…¬å¸æ ‡ç­¾å¦‚å›¾æ‰€ç¤º

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/bd0123b6356779b936100c663e07733c.png?raw=true)

![](https://github.com/Thirty-Li/typoraImg/blob/main/blogImage/299cbedbe2266a06ab1ab94e04682b24.png?raw=true)

```python
import json
from pprint import pprint
from DrissionPage import SessionPage, ChromiumPage
page = ChromiumPage()
page.get('https://we.51job.com/pc/search?jobArea=020000&keyword=java&searchType=2&keywordType=')
# è·å–æ‰€æœ‰èŒä½ä¿¡æ¯æ‰€åœ¨çš„divæ ‡ç­¾
divs = page.eles('css:.joblist-item')
for div in divs:
    # æå–å…·ä½“çš„æ•°æ®å†…å®¹
    info = div.ele('css:.joblist-item-job').attr('sensorsdata')
    # æŠŠjsonå­—ç¬¦ä¸²è½¬ä¸ºjsonå­—å…¸æ•°æ®
    json_data = json.loads(info)
    # å…¬å¸å§“å
    c_name = div.ele('css:.cname').attr('title')
    # å…¬å¸é¢†åŸŸ
    dc = div.ele('css:.dc').text
    # æå–æ ‡ç­¾
    tags = ','.join([i.text for i in div.eles('css:.tag')])
    # æå–ç›¸å…³æ•°æ®å†…å®¹ï¼Œä¿å­˜åœ¨å­—å…¸å†…
    dit = {
        'èŒä½': json_data['jobTitle'],
        'è–ªèµ„': json_data['jobSalary'],
        'åŸå¸‚': json_data['jobArea'],
        'ç»éªŒ': json_data['jobYear'],
        'å­¦å†': json_data['jobDegree'],
        'å…¬å¸': c_name,
        'é¢†åŸŸ': dc,
        'æ ‡ç­¾': tags,
    }
    print(dit)

```

ä»¥ä¸Šå°±æ˜¯ å‰ç¨‹æ— å¿§ ç½‘ç«™ä¿¡æ¯çˆ¬å–è¿‡ç¨‹